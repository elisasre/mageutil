<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# mageutil

```go
import "github.com/elisasre/mageutil"
```

package mageutil provides util functions for [Magefile](<https://magefile.org/>). For usage please refer to [documentation](<https://magefile.org/importing/>) provided by Magefile. For autocompletions see [completions](<https://github.com/elisasre/mageutil/tree/main/completions>).

## Index

- [Constants](<#constants>)
- [func Build\(ctx context.Context, name string\) error](<#Build>)
- [func BuildAll\(ctx context.Context\) error](<#BuildAll>)
- [func BuildFor\(ctx context.Context, goos, goarch, name string\) error](<#BuildFor>)
- [func BuildForArmMac\(ctx context.Context, name string\) error](<#BuildForArmMac>)
- [func BuildForLinux\(ctx context.Context, name string\) error](<#BuildForLinux>)
- [func BuildForMac\(ctx context.Context, name string\) error](<#BuildForMac>)
- [func CGO\(enabled bool\)](<#CGO>)
- [func Clean\(ctx context.Context\) error](<#Clean>)
- [func CoverInfo\(ctx context.Context, profile string\) error](<#CoverInfo>)
- [func DefaultLabels\(imageName, url, desc string\) map\[string\]string](<#DefaultLabels>)
- [func Docker\(ctx context.Context, args ...string\) error](<#Docker>)
- [func DockerBuild\(ctx context.Context, platform, dockerfile, buildCtx string, tags \[\]string, extraCtx, labels map\[string\]string\) error](<#DockerBuild>)
- [func DockerBuildDefault\(ctx context.Context, imageName, url string\) error](<#DockerBuildDefault>)
- [func DockerPushAllTags\(ctx context.Context, imageName string\) error](<#DockerPushAllTags>)
- [func DockerTags\(imageName string, tags ...string\) \[\]string](<#DockerTags>)
- [func Git\(ctx context.Context, args ...string\) error](<#Git>)
- [func Go\(ctx context.Context, args ...string\) error](<#Go>)
- [func GoList\(ctx context.Context, target string\) \(\[\]string, error\)](<#GoList>)
- [func GoWith\(ctx context.Context, env map\[string\]string, args ...string\) error](<#GoWith>)
- [func GolangCILint\(ctx context.Context, args ...string\) error](<#GolangCILint>)
- [func IntegrationTest\(ctx context.Context, pkg string\) error](<#IntegrationTest>)
- [func LicenseCheck\(ctx context.Context, w io.Writer, targets ...string\) error](<#LicenseCheck>)
- [func LintAll\(ctx context.Context\) error](<#LintAll>)
- [func MergeCover\(ctx context.Context, coverFiles \[\]string, w io.Writer\) error](<#MergeCover>)
- [func MergeCoverProfiles\(ctx context.Context\) error](<#MergeCoverProfiles>)
- [func MustSetEnv\(k, v string\)](<#MustSetEnv>)
- [func Run\(ctx context.Context, name string, args ...string\) error](<#Run>)
- [func Targets\(ctx context.Context\) \(\[\]string, error\)](<#Targets>)
- [func UnitTest\(ctx context.Context\) error](<#UnitTest>)
- [func Verbose\(enabled bool\)](<#Verbose>)
- [func VulnCheck\(ctx context.Context, args ...string\) error](<#VulnCheck>)
- [func VulnCheckAll\(ctx context.Context\) error](<#VulnCheckAll>)


## Constants

<a name="OCILabelTitle"></a>

```go
const (
    OCILabelTitle       = "org.opencontainers.image.title"
    OCILabelURL         = "org.opencontainers.image.url"
    OCILabelVersion     = "org.opencontainers.image.version"
    OCILabelDescription = "org.opencontainers.image.description"
    OCILabelCreated     = "org.opencontainers.image.created"
    OCILabelSource      = "org.opencontainers.image.source"
    OCILabelLicenses    = "org.opencontainers.image.licenses"
    OCILabelAuthors     = "org.opencontainers.image.authors"
    OCILabelVendor      = "org.opencontainers.image.vendor"
    OCILabelRevision    = "org.opencontainers.image.revision"
)
```

<a name="DefaultPlatform"></a>

```go
const (
    DefaultPlatform   = "linux/amd64"
    DefaultDockerfile = "Dockerfile"
    DefaultBuildCtx   = "."
    DefaultExtraCtx   = BinDir + "linux/amd64/"
)
```

<a name="CmdDir"></a>

```go
const (
    CmdDir     = "./cmd/"
    TargetDir  = "./target/"
    BinDir     = TargetDir + "bin/"
    ReportsDir = TargetDir + "reports/"
)
```

<a name="UnitCoverProfile"></a>

```go
const (
    UnitCoverProfile        = ReportsDir + "unit-test-coverage.out"
    IntegrationCoverProfile = ReportsDir + "integration-test-coverage.out"
    MergedCoverProfile      = ReportsDir + "merged-test-coverage.out"
)
```

<a name="UNKNOWN"></a>

```go
const (
    UNKNOWN = "Unknown"
)
```

<a name="Build"></a>
## func Build

```go
func Build(ctx context.Context, name string) error
```

Build binary using settings from system env.

<a name="BuildAll"></a>
## func BuildAll

```go
func BuildAll(ctx context.Context) error
```

BuildAll binaries for targets returned by utils.Targets using utils.Build.

<a name="BuildFor"></a>
## func BuildFor

```go
func BuildFor(ctx context.Context, goos, goarch, name string) error
```

BuildDefault binary using settings from system env.

<a name="BuildForArmMac"></a>
## func BuildForArmMac

```go
func BuildForArmMac(ctx context.Context, name string) error
```

BuildForArmMac builds binary for arm64 based mac systems.

<a name="BuildForLinux"></a>
## func BuildForLinux

```go
func BuildForLinux(ctx context.Context, name string) error
```

BuildForLinux builds binary for amd64 based linux systems.

<a name="BuildForMac"></a>
## func BuildForMac

```go
func BuildForMac(ctx context.Context, name string) error
```

BuildForMac builds binary for amd64 based mac systems.

<a name="CGO"></a>
## func CGO

```go
func CGO(enabled bool)
```

CGO can be used to enable of disable CGO. By default this package will disable CGO.

<a name="Clean"></a>
## func Clean

```go
func Clean(ctx context.Context) error
```

Clean removes all files ignored by git.

<a name="CoverInfo"></a>
## func CoverInfo

```go
func CoverInfo(ctx context.Context, profile string) error
```

CoverInfo prints function level cover stats from given profile.

<a name="DefaultLabels"></a>
## func DefaultLabels

```go
func DefaultLabels(imageName, url, desc string) map[string]string
```

DefaultLabels provides labels for Elisa SoSe/SRE organization.

<a name="Docker"></a>
## func Docker

```go
func Docker(ctx context.Context, args ...string) error
```

Docker runs systems docker cmd with given args.

<a name="DockerBuild"></a>
## func DockerBuild

```go
func DockerBuild(ctx context.Context, platform, dockerfile, buildCtx string, tags []string, extraCtx, labels map[string]string) error
```

DockerBuild is a short hand for docker buildx build with saine default flags

<a name="DockerBuildDefault"></a>
## func DockerBuildDefault

```go
func DockerBuildDefault(ctx context.Context, imageName, url string) error
```

DockerBuildDefault build image with sane defaults.

<a name="DockerPushAllTags"></a>
## func DockerPushAllTags

```go
func DockerPushAllTags(ctx context.Context, imageName string) error
```

DockerPushAllTags push all tags for given image.

<a name="DockerTags"></a>
## func DockerTags

```go
func DockerTags(imageName string, tags ...string) []string
```

DockerTags creates slice of tags usign \`tags\` variable and DOCKER\_IMAGE\_TAGS env var.

<a name="Git"></a>
## func Git

```go
func Git(ctx context.Context, args ...string) error
```

Git is shorthand for git executable provided by system.

<a name="Go"></a>
## func Go

```go
func Go(ctx context.Context, args ...string) error
```

Go is shorthand for go executable provided by system.

<a name="GoList"></a>
## func GoList

```go
func GoList(ctx context.Context, target string) ([]string, error)
```

GoList lists all packages in given target.

<a name="GoWith"></a>
## func GoWith

```go
func GoWith(ctx context.Context, env map[string]string, args ...string) error
```

GoWith is shorthand for go executable provided by system.

<a name="GolangCILint"></a>
## func GolangCILint

```go
func GolangCILint(ctx context.Context, args ...string) error
```

LintNative imports golangci\-lint and runs it as a helper library.

<a name="IntegrationTest"></a>
## func IntegrationTest

```go
func IntegrationTest(ctx context.Context, pkg string) error
```

IntegrationTest executes all tests in given pkg with default flags.

<a name="LicenseCheck"></a>
## func LicenseCheck

```go
func LicenseCheck(ctx context.Context, w io.Writer, targets ...string) error
```

LicenseCheck runs github.com/google/go\-licenses/licenses for given targets and writes toe output into w.

<a name="LintAll"></a>
## func LintAll

```go
func LintAll(ctx context.Context) error
```

LintAll uses golangci\-lint library to lint all go files.

<a name="MergeCover"></a>
## func MergeCover

```go
func MergeCover(ctx context.Context, coverFiles []string, w io.Writer) error
```

MergeCover merges multiple go test \-cover profiles and writes the combined coverage into out.

coverage merging is adapted from https://github.com/wadey/gocovmerge

<a name="MergeCoverProfiles"></a>
## func MergeCoverProfiles

```go
func MergeCoverProfiles(ctx context.Context) error
```

MergeCoverProfiles merges default unit and integration cover profile.

<a name="MustSetEnv"></a>
## func MustSetEnv

```go
func MustSetEnv(k, v string)
```



<a name="Run"></a>
## func Run

```go
func Run(ctx context.Context, name string, args ...string) error
```

Run builds and executes app binary from default path.

<a name="Targets"></a>
## func Targets

```go
func Targets(ctx context.Context) ([]string, error)
```

Targets returns list of main pkgs under utils.CmdDir.

<a name="UnitTest"></a>
## func UnitTest

```go
func UnitTest(ctx context.Context) error
```

UnitTest executes all unit tests with default flags.

<a name="Verbose"></a>
## func Verbose

```go
func Verbose(enabled bool)
```

Verbose can be used to control mage's verbose state. By default this package will set mage in verbose state.

<a name="VulnCheck"></a>
## func VulnCheck

```go
func VulnCheck(ctx context.Context, args ...string) error
```

VulnChek runs golang.org/x/vuln/scan with given args.

<a name="VulnCheckAll"></a>
## func VulnCheckAll

```go
func VulnCheckAll(ctx context.Context) error
```

VulnChek runs golang.org/x/vuln/scan for all packages.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
